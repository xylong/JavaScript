<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		div {
			border-radius: 4px;
		}

		#container {
			width: 700px;
			height: 500px;
			border: 1px solid #ccc;
			position: absolute;
			left: 0;
			right: 0;
			top:0;
			bottom: 0;
			margin: auto;
			font-size:0;/*间隙hack*/
			padding:5px;
			background-color: #f5f5f4;
			box-shadow: 0 0 5px #ccc;
		}

		.option {
			height: 50px;
			width: 60px;
			background-color: #d14;
			box-shadow: 0 0 5px #ccc;
			opacity:0.3;
			/*float: left;*/
			display: inline-block;
			vertical-align: top;
			margin: 5px;
			color: red;
			font-size: 14px;
		}
	</style>
</head>
<body>
	<div id="container">
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
		<div class="option"></div>
	</div>
</body>
</html>

<script type="text/javascript">
	window.onload = function () {
		var divs = document.getElementsByClassName('option');
		
		for (var i = 0; i < divs.length; i++) {
			divs[i].timer = null;
			divs[i].opacity = 30;
			divs[i].clickNumber = 0;

			divs[i].onmouseover = function () {
				moveStart(this, 100);
			}

			divs[i].onmouseout = function () {
				moveStart(this, 30);
			}

			divs[i].onclick = function () {
				if (this.clickNumber % 2 == 0) {
					this.onmouseover = this.onmouseout = null;
				} else{
					moveStart(this, 30);

					this.onmouseover = function () {
						moveStart(this, 100);
					}

					this.onmouseout = function () {
						moveStart(this, 30);
					}
				};
				this.clickNumber++;
			}
		};
	}

	function moveStart (obj, target) {
		var speed = obj.opacity > target ? -10 : 10;
		clearInterval(obj.timer);

		obj.timer = setInterval(function () {
			if (obj.opacity == target) {
				clearInterval(obj.timer);
			} else{
				obj.opacity += speed;
				obj.style.opacity = obj.opacity / 100;
			};
		}, 30);
	}
</script>
